<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grateful - Your Daily Gratitude Journal</title>
    <link rel="icon" type="image/svg+xml" href="lotus-logo.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header id="header">
            <div class="header-left">
                <button id="archiveBtn" class="header-nav-btn" onclick="showHistory()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    <span>Archive</span>
                </button>
                <button id="homeBtn" class="icon-btn" onclick="goHome()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                </button>
            </div>
            <div class="header-center">
                <div class="app-logo">
                    <img src="lotus-logo.svg" alt="Grateful" class="logo-image">
                    <span class="logo-text">Grateful</span>
                </div>
                <h1 id="headerTitle" style="display: none;">Today's Gratitude</h1>
            </div>
            <div class="header-right">
                <div class="streak-badge" id="streakBadge">
                    <div class="streak-number" id="streakNumber">0üî•</div>
                </div>
                <button id="sendGratitudeBtn" class="header-nav-btn" onclick="showSendGratitude()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 2L11 13"/>
                        <path d="M22 2L15 22L11 13L2 9L22 2Z"/>
                    </svg>
                    <span>Send</span>
                </button>
                <button id="settingsBtn" class="header-nav-btn" onclick="showSettings()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6m5.2-13.2l-4.2 4.2m-2 2l-4.2 4.2m10.4 0l-4.2-4.2m-2-2l-4.2-4.2"/>
                    </svg>
                    <span>Settings</span>
                </button>
                <button id="shareBtn" class="icon-btn" style="display: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                        <polyline points="16 6 12 2 8 6"/>
                        <line x1="12" y1="2" x2="12" y2="15"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main id="mainContent">
            <!-- Welcome/Home Screen -->
            <div id="welcomeScreen" class="screen active">
                <div class="welcome-container">
                    <!-- Birthday Reminder Banner (Upcoming) -->
                    <div id="birthdayReminder" class="birthday-reminder" style="display: none;">
                        <div class="birthday-icon">üéÇ</div>
                        <div class="birthday-content">
                            <div class="birthday-title" id="birthdayTitle">Upcoming Birthdays</div>
                            <div class="birthday-list" id="birthdayList"></div>
                        </div>
                    </div>

                    <!-- Monthly Birthdays Banner -->
                    <div id="monthlyBirthdaysReminder" class="monthly-birthdays-reminder" style="display: none;">
                        <div class="birthday-icon">üìÖ</div>
                        <div class="birthday-content">
                            <div class="birthday-title" id="monthlyBirthdaysTitle">Birthdays This Month</div>
                            <div class="birthday-list" id="monthlyBirthdaysList"></div>
                        </div>
                    </div>
                    <div class="welcome-circle" onclick="startJournaling()">
                        <h2 class="welcome-greeting" id="welcomeGreeting">Good evening, Sarah.</h2>
                        <p class="welcome-prompt">What's on your heart in you moment?</p>
                        <p class="welcome-tap-hint">Tap the circle to begin</p>
                    </div>
                </div>
            </div>

            <!-- Entry Creation Screen -->
            <div id="entryScreen" class="screen">
                <div class="date-navigation">
                    <button class="date-nav-btn" onclick="previousDay()">‚óÄ</button>
                    <div class="date-display" id="todayDate"></div>
                    <button class="date-nav-btn" onclick="nextDay()">‚ñ∂</button>
                </div>

                <div class="entry-container">
                    <!-- Item 1 -->
                    <div class="gratitude-item" data-item="1">
                        <div class="item-header">
                            <span class="item-number">1</span>
                        </div>
                        <div class="suggestion-bubble" id="suggestion-1" onclick="useSuggestion(1)">
                            <span class="suggestion-bubble-icon">üí°</span>
                            <span class="suggestion-bubble-text" id="suggestion-text-1"></span>
                            <button class="suggestion-bubble-refresh" onclick="refreshSuggestion(1); event.stopPropagation();">üîÑ</button>
                        </div>
                        <textarea
                            class="item-input"
                            placeholder="What are you grateful for today?"
                            maxlength="500"
                            data-item-id="1"
                        ></textarea>
                        <div class="media-controls">
                            <button class="media-btn" onclick="openCamera(1)">üì∏ Camera</button>
                            <button class="media-btn" onclick="selectMedia(1, 'image')">üñºÔ∏è Gallery</button>
                        </div>
                        <div class="media-preview" id="preview-1"></div>
                    </div>

                    <!-- Item 2 -->
                    <div class="gratitude-item" data-item="2">
                        <div class="item-header">
                            <span class="item-number">2</span>
                        </div>
                        <div class="suggestion-bubble" id="suggestion-2" onclick="useSuggestion(2)">
                            <span class="suggestion-bubble-icon">üí°</span>
                            <span class="suggestion-bubble-text" id="suggestion-text-2"></span>
                            <button class="suggestion-bubble-refresh" onclick="refreshSuggestion(2); event.stopPropagation();">üîÑ</button>
                        </div>
                        <textarea
                            class="item-input"
                            placeholder="What else brought you joy?"
                            maxlength="500"
                            data-item-id="2"
                        ></textarea>
                        <div class="media-controls">
                            <button class="media-btn" onclick="openCamera(2)">üì∏ Camera</button>
                            <button class="media-btn" onclick="selectMedia(2, 'image')">üñºÔ∏è Gallery</button>
                        </div>
                        <div class="media-preview" id="preview-2"></div>
                    </div>

                    <!-- Item 3 -->
                    <div class="gratitude-item" data-item="3">
                        <div class="item-header">
                            <span class="item-number">3</span>
                        </div>
                        <div class="suggestion-bubble" id="suggestion-3" onclick="useSuggestion(3)">
                            <span class="suggestion-bubble-icon">üí°</span>
                            <span class="suggestion-bubble-text" id="suggestion-text-3"></span>
                            <button class="suggestion-bubble-refresh" onclick="refreshSuggestion(3); event.stopPropagation();">üîÑ</button>
                        </div>
                        <textarea
                            class="item-input"
                            placeholder="One more thing to appreciate..."
                            maxlength="500"
                            data-item-id="3"
                        ></textarea>
                        <div class="media-controls">
                            <button class="media-btn" onclick="openCamera(3)">üì∏ Camera</button>
                            <button class="media-btn" onclick="selectMedia(3, 'image')">üñºÔ∏è Gallery</button>
                        </div>
                        <div class="media-preview" id="preview-3"></div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="saveBtn" class="primary-btn" onclick="saveEntry()">Save Entry üíæ</button>
                    <button id="viewHistoryBtn" class="secondary-btn" onclick="showHistory()">View Past Entries</button>
                    <button id="sendGratitudeBtn" class="secondary-btn" onclick="showSendGratitude()">Send Gratitude üíå</button>
                </div>
            </div>

            <!-- Historical View Screen -->
            <div id="historyScreen" class="screen">
                <div class="history-header">
                    <div class="filter-buttons">
                        <button class="filter-btn" onclick="filterEntries('week')">Week</button>
                        <button class="filter-btn" onclick="filterEntries('month')">Month</button>
                        <button class="filter-btn" onclick="filterEntries('year')">Year</button>
                        <button class="filter-btn active" onclick="filterEntries('all')">All</button>
                    </div>
                    <div class="view-toggle">
                        <button class="view-toggle-btn active" onclick="switchView('list')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="8" y1="6" x2="21" y2="6"/>
                                <line x1="8" y1="12" x2="21" y2="12"/>
                                <line x1="8" y1="18" x2="21" y2="18"/>
                                <line x1="3" y1="6" x2="3.01" y2="6"/>
                                <line x1="3" y1="12" x2="3.01" y2="12"/>
                                <line x1="3" y1="18" x2="3.01" y2="18"/>
                            </svg>
                        </button>
                        <button class="view-toggle-btn" onclick="switchView('calendar')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                <line x1="16" y1="2" x2="16" y2="6"/>
                                <line x1="8" y1="2" x2="8" y2="6"/>
                                <line x1="3" y1="10" x2="21" y2="10"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- List View -->
                <div id="listView" class="history-view active">
                    <div id="entriesList" class="history-list"></div>
                </div>

                <!-- Calendar View -->
                <div id="calendarView" class="history-view">
                    <div class="calendar-layout">
                        <div class="calendar-container">
                            <div class="calendar-header">
                                <button class="calendar-nav-btn" onclick="previousMonth()">‚óÄ</button>
                                <h2 class="calendar-month" id="calendarMonthYear"></h2>
                                <button class="calendar-nav-btn" onclick="nextMonth()">‚ñ∂</button>
                            </div>
                            <div id="calendarGrid" class="calendar-grid"></div>
                        </div>
                        <div id="calendarDetailPane" class="calendar-detail-pane">
                            <div class="calendar-detail-placeholder">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                                <p>Select a date to view details</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detail View Screen -->
            <div id="detailScreen" class="screen">
                <div id="detailContent"></div>
                <div class="action-buttons">
                    <button class="primary-btn" onclick="editEntry()">Edit Entry ‚úèÔ∏è</button>
                    <button class="secondary-btn" onclick="deleteEntry()">Delete Entry</button>
                </div>
            </div>

            <!-- Settings Screen -->
            <div id="settingsScreen" class="screen">
                <div class="settings-container">
                    <div class="settings-card">
                        <h2 class="settings-title">Settings</h2>

                        <div class="setting-item">
                            <label class="setting-label">Your Name</label>
                            <input type="text" id="userNameInput" class="setting-input" placeholder="Enter your name" maxlength="50">
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">Welcome Message Style</label>
                            <select id="greetingStyle" class="setting-input">
                                <option value="auto">Auto (based on time of day)</option>
                                <option value="morning">Good morning</option>
                                <option value="afternoon">Good afternoon</option>
                                <option value="evening">Good evening</option>
                                <option value="simple">Hello</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">Color Scheme</label>
                            <select id="colorScheme" class="setting-input" onchange="applyColorScheme(this.value)">
                                <option value="warm-peach">Warm Peach (Default)</option>
                                <option value="lavender-dream">Lavender Dream</option>
                                <option value="mint-fresh">Mint Fresh</option>
                                <option value="sunset-glow">Sunset Glow</option>
                                <option value="ocean-breeze">Ocean Breeze</option>
                                <option value="rose-garden">Rose Garden</option>
                            </select>
                        </div>

                        <button class="primary-btn" onclick="saveSettings()">Save Settings</button>
                        <button class="secondary-btn" onclick="showAddressBook()">Manage Address Book</button>
                    </div>
                </div>
            </div>

            <!-- Address Book Screen -->
            <div id="addressBookScreen" class="screen">
                <div class="settings-container">
                    <div class="settings-card">
                        <h2 class="settings-title">Address Book</h2>

                        <div class="contact-form">
                            <h3 id="contactFormTitle">Add New Contact</h3>
                            <input type="hidden" id="editingContactId" value="">

                            <!-- Contact Photo -->
                            <div class="setting-item contact-photo-section">
                                <label class="setting-label">Photo (optional)</label>
                                <div class="contact-photo-upload">
                                    <div class="contact-photo-preview" id="contactPhotoPreview">
                                        <span class="photo-placeholder">üì∑</span>
                                    </div>
                                    <div class="photo-upload-buttons">
                                        <button type="button" class="secondary-btn small" onclick="selectContactPhoto()">Choose Photo</button>
                                        <button type="button" class="secondary-btn small" onclick="clearContactPhoto()" id="clearPhotoBtn" style="display: none;">Remove</button>
                                    </div>
                                    <input type="file" id="contactPhotoInput" accept="image/*" style="display: none;" onchange="handleContactPhotoSelect(event)">
                                </div>
                            </div>

                            <div class="setting-item">
                                <label class="setting-label">Name</label>
                                <input type="text" id="contactName" class="setting-input" placeholder="Enter name" maxlength="50">
                            </div>
                            <div class="setting-item">
                                <label class="setting-label">Phone Number</label>
                                <input type="tel" id="contactPhone" class="setting-input" placeholder="Enter phone number" maxlength="20">
                            </div>
                            <div class="setting-item">
                                <label class="setting-label">Birthday (optional)</label>
                                <input type="date" id="contactBirthday" class="setting-input">
                            </div>
                            <div class="contact-form-buttons">
                                <button class="primary-btn" onclick="saveContact()" id="saveContactBtn">Add Contact</button>
                                <button class="secondary-btn" onclick="cancelEditContact()" id="cancelEditBtn" style="display: none;">Cancel</button>
                            </div>
                        </div>

                        <!-- CSV Import/Export Section -->
                        <div class="csv-section">
                            <h3>Import / Export Contacts</h3>
                            <div class="csv-buttons">
                                <button class="secondary-btn" onclick="importContactsCSV()">
                                    üì• Import CSV
                                </button>
                                <button class="secondary-btn" onclick="exportContactsCSV()">
                                    üì§ Export CSV
                                </button>
                            </div>
                            <p class="csv-hint">Compatible with Google Contacts and Microsoft Outlook</p>
                            <input type="file" id="csvFileInput" accept=".csv" style="display: none;" onchange="handleCSVImport(event)">
                        </div>

                        <div class="contacts-list">
                            <h3>My Contacts</h3>
                            <div id="contactsList"></div>
                        </div>

                        <button class="secondary-btn" onclick="showSettings()">Back to Settings</button>
                    </div>
                </div>
            </div>

            <!-- Send Gratitude Screen -->
            <div id="sendGratitudeScreen" class="screen">
                <div class="settings-container">
                    <div class="settings-card">
                        <h2 class="settings-title">Send Gratitude</h2>

                        <div class="setting-item">
                            <label class="setting-label">Select Contact</label>
                            <select id="recipientSelect" class="setting-input" onchange="handleRecipientChange()">
                                <option value="">Choose from address book...</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">Or Enter Phone Number</label>
                            <input type="tel" id="recipientPhone" class="setting-input" placeholder="Enter phone number" maxlength="20">
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">Message</label>
                            <textarea id="gratitudeMessage" class="setting-input" placeholder="Write your gratitude message..." maxlength="500" rows="6"></textarea>
                            <div class="char-count"><span id="messageCharCount">0</span>/500</div>
                        </div>

                        <button class="primary-btn" onclick="sendGratitudeMessage()">Send Message üíå</button>
                        <button class="secondary-btn" onclick="goHome()">Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Media Viewer Modal -->
            <div id="mediaModal" class="modal" onclick="closeMediaModal()">
                <span class="close-modal">√ó</span>
                <div class="modal-content" onclick="event.stopPropagation()">
                    <div id="mediaViewer"></div>
                    <div class="media-nav">
                        <button onclick="prevMedia(); event.stopPropagation()">‚¨ÖÔ∏è</button>
                        <span id="mediaCounter">1/3</span>
                        <button onclick="nextMedia(); event.stopPropagation()">‚û°Ô∏è</button>
                    </div>
                </div>
            </div>

            <!-- Camera Capture Modal -->
            <div id="cameraModal" class="modal">
                <span class="close-modal" onclick="closeCameraModal()">√ó</span>
                <div class="camera-content" onclick="event.stopPropagation()">
                    <video id="cameraPreview" autoplay playsinline></video>
                    <canvas id="cameraCanvas" style="display: none;"></canvas>
                    <div class="camera-controls">
                        <button class="camera-btn" id="capturePhotoBtn" onclick="capturePhoto()">üì∑ Take Photo</button>
                        <button class="camera-btn" id="startRecordBtn" onclick="startRecording()">üé• Start Recording</button>
                        <button class="camera-btn" id="stopRecordBtn" onclick="stopRecording()" style="display: none;">‚èπÔ∏è Stop Recording</button>
                        <button class="secondary-btn" onclick="closeCameraModal()">Cancel</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Toast Notifications -->
        <div id="toast" class="toast"></div>

        <!-- Footer -->
        <footer id="footer">
            <p>¬© 2025 Yash Varma. All rights reserved.</p>
        </footer>
    </div>

    <script src="database.js"></script>
    <script src="app.js"></script>
</body>
</html>
